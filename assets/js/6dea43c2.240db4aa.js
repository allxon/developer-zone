"use strict";(self.webpackChunkocto_develop_zone=self.webpackChunkocto_develop_zone||[]).push([[3715],{8449:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>d,contentTitle:()=>c,default:()=>m,frontMatter:()=>s,metadata:()=>l,toc:()=>i});var a=o(4848),t=o(8453);const s={},c=void 0,l={id:"Implement Features/Commands",title:"Commands",description:"command-sequence",source:"@site/versioned_docs/version-1.1.0/Implement Features/Commands.md",sourceDirName:"Implement Features",slug:"/Implement Features/Commands",permalink:"/1.1.0/Implement Features/Commands",draft:!1,unlisted:!1,editUrl:"https://github.com/allxon/developer-zone/edit/master/versioned_docs/version-1.1.0/Implement Features/Commands.md",tags:[],version:"1.1.0",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"States",permalink:"/1.1.0/Implement Features/States"},next:{title:"Alerts",permalink:"/1.1.0/Implement Features/Alerts"}},d={},i=[];function r(n){const e={admonition:"admonition",code:"code",img:"img",p:"p",pre:"pre",...(0,t.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"command-sequence",src:o(3382).A+"",width:"434",height:"309"})}),"\n",(0,a.jsxs)(e.p,{children:["Command Cards provide a custom GUI to send command through Allxon protal. Send ",(0,a.jsx)(e.code,{children:"v2/notifyPluginUpdate"})," to initialize. When you execute the Command from Allxon Portal, Plugin will receive ",(0,a.jsx)(e.code,{children:"v2/notifyPluginCommand"}),", then send ",(0,a.jsx)(e.code,{children:"v2/notifyPluginCommandAck"})," back to confirm the receive, finally, send ",(0,a.jsx)(e.code,{children:"v2/notifyPluginCommandAck"})," to bring execution result back to Allxon Portal."]}),"\n",(0,a.jsx)(e.p,{children:"Here is a example:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",metastring:"{17-35}",children:'{\n  "jsonrpc": "2.0",\n  "method": "v2/notifyPluginUpdate",\n  "params": {\n    "sdk": "${OCTO_SDK_VERSION}",\n    "appGUID": "${PLUGIN_APP_GUID}",\n    "appName": "${PLUGIN_NAME}",\n    "epoch": "",\n    "displayName": "plugIN Hello",\n    "type": "ib",\n    "version": "${PLUGIN_VERSION}",\n    "modules": [\n      {\n        "moduleName": "${PLUGIN_NAME}",\n        "displayName": "plugIN Hello",\n        "properties": [],\n        "commands": [\n          {\n            "name": "say_hello",\n            "type": "asynchronous",\n            "displayCategory": "Action",\n            "displayName": "Say Hello",\n            "description": "Say hello to a person",\n            "params": [\n              {\n                "name": "person",\n                "displayName": "Person Name",\n                "description": "Person who you wanna to say hello",\n                "displayType": "string",\n                "required": true,\n                "defaultValue": "Buzz"\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  }\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"command-card",src:o(31).A+"",width:"587",height:"631"})}),"\n",(0,a.jsxs)(e.p,{children:['After click "Execute" button, Allxon Portal will send ',(0,a.jsx)(e.code,{children:"v2/notifyPluginCommand"})," to Plugin:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",metastring:"{3}",children:'{\n  "jsonrpc": "2.0",\n  "method": "v2/notifyPluginCommand?authorization=$argon2id$v=19$m=64,t=16,p=8$YnFaWiIoX1ckSmE9Tkp5YQ$XLS6riVCcBj/EUr5lYnJ8Q",\n  "params": {\n    "appGUID": "a8e873a1-e5df-43a2-928a-745ff9c94dfb",\n    "moduleName": "plugin-hello",\n    "commandSource": "remote",\n    "commands": [\n      {\n        "name": "say_hello",\n        "params": [\n          {\n            "name": "person",\n            "value": "Buzz"\n          }\n        ]\n      }\n    ],\n    "commandId": "d0a0af987c17da435b2bc44dfbee8ffe90104f4f",\n    "epoch": "1664185099"\n  }\n}\n'})}),"\n",(0,a.jsx)(e.admonition,{type:"note",children:(0,a.jsxs)(e.p,{children:["You may curious what's texts follow ",(0,a.jsx)(e.code,{children:"?"})," at highlight line. Octo SDK will verify this JSON is safe through these texts When you call Octo SDK ",(0,a.jsx)(e.code,{children:"JsonValidator::Verify()"}),"."]})}),"\n",(0,a.jsxs)(e.p,{children:["Once we received ",(0,a.jsx)(e.code,{children:"v2/notifyPluginCommand"}),", send back ",(0,a.jsx)(e.code,{children:"v2/notifyPluginCommandAck"})," with ",(0,a.jsx)(e.code,{children:'"commandState": "ACCEPTED"'})," to comfirm received with Allxon Portal."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",metastring:"{10}",children:'{\n  "jsonrpc": "2.0",\n  "method": "v2/notifyPluginCommandAck",\n  "params": {\n    "appGUID": "a8e873a1-e5df-43a2-928a-745ff9c94dfb",\n    "epoch": "1664250407",\n    "commandId": "c96a50867715c200fbea63b5898945512afd9409",\n    "commandSource": "remote",\n    "moduleName": "plugin-hello",\n    "commandState": "ACCEPTED",\n    "commandAcks": [\n      {\n        "name": "say_hello",\n        "result": {\n          "response": "Hello Buzz"\n        }\n      }\n    ]\n  }\n}\n'})}),"\n",(0,a.jsxs)(e.p,{children:["After finished your command task, send ",(0,a.jsx)(e.code,{children:"v2/notifyPluginCommandAck"})," with ",(0,a.jsx)(e.code,{children:'"commandState": "ACKED"'})," and contain execution result back to Allxon Portal."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",metastring:"{10}",children:'{\n  "jsonrpc": "2.0",\n  "method": "v2/notifyPluginCommandAck",\n  "params": {\n    "appGUID": "a8e873a1-e5df-43a2-928a-745ff9c94dfb",\n    "epoch": "1664250407",\n    "commandId": "c96a50867715c200fbea63b5898945512afd9409",\n    "commandSource": "remote",\n    "moduleName": "plugin-hello",\n    "commandState": "ACKED",\n    "commandAcks": [\n      {\n        "name": "say_hello",\n        "result": {\n          "response": "Hello Buzz"\n        }\n      }\n    ]\n  }\n}\n'})}),"\n",(0,a.jsx)(e.admonition,{type:"note",children:(0,a.jsxs)(e.p,{children:["There're other ",(0,a.jsx)(e.code,{children:'"commandState"'})," can use: ",(0,a.jsx)(e.code,{children:'"REJECTED"'}),", ",(0,a.jsx)(e.code,{children:'"ERRORED"'})]})}),"\n",(0,a.jsx)(e.p,{children:"If everything going well, command execute dialog on Allxon Portal will show up like this:"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"command-result",src:o(518).A+"",width:"561",height:"665"})})]})}function m(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(r,{...n})}):r(n)}},31:(n,e,o)=>{o.d(e,{A:()=>a});const a=o.p+"assets/images/command-card-3645fb5701aea1c328af9f9ce2f38630.png"},518:(n,e,o)=>{o.d(e,{A:()=>a});const a=o.p+"assets/images/command-result-588c45b65c5fd5000a802b899d867e0b.png"},3382:(n,e,o)=>{o.d(e,{A:()=>a});const a=o.p+"assets/images/command-sequence-8084c4966e0b8778ec0f42297c41c821.png"},8453:(n,e,o)=>{o.d(e,{R:()=>c,x:()=>l});var a=o(6540);const t={},s=a.createContext(t);function c(n){const e=a.useContext(s);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:c(n.components),a.createElement(s.Provider,{value:e},n.children)}}}]);