"use strict";(self.webpackChunkocto_develop_zone=self.webpackChunkocto_develop_zone||[]).push([[2824],{3905:(t,e,n)=>{n.d(e,{Zo:()=>u,kt:()=>s});var a=n(7294);function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){if(null==t)return{};var n,a,l=function(t,e){if(null==t)return{};var n,a,l={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(l[n]=t[n]);return l}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}var d=a.createContext({}),p=function(t){var e=a.useContext(d),n=e;return t&&(n="function"==typeof t?t(e):r(r({},e),t)),n},u=function(t){var e=p(t.components);return a.createElement(d.Provider,{value:e},t.children)},c={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},g=a.forwardRef((function(t,e){var n=t.components,l=t.mdxType,i=t.originalType,d=t.parentName,u=o(t,["components","mdxType","originalType","parentName"]),g=p(n),s=l,m=g["".concat(d,".").concat(s)]||g[s]||c[s]||i;return n?a.createElement(m,r(r({ref:e},u),{},{components:n})):a.createElement(m,r({ref:e},u))}));function s(t,e){var n=arguments,l=e&&e.mdxType;if("string"==typeof t||l){var i=n.length,r=new Array(i);r[0]=g;var o={};for(var d in e)hasOwnProperty.call(e,d)&&(o[d]=e[d]);o.originalType=t,o.mdxType="string"==typeof t?t:l,r[1]=o;for(var p=2;p<i;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},4476:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>d,contentTitle:()=>r,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var a=n(7462),l=(n(7294),n(3905));const i={},r="Introduction",o={unversionedId:"Main Concept/Introduction",id:"version-1.1.0/Main Concept/Introduction",title:"Introduction",description:"allxoninfrasturcture",source:"@site/versioned_docs/version-1.1.0/Main Concept/Introduction.md",sourceDirName:"Main Concept",slug:"/Main Concept/Introduction",permalink:"/1.1.0/Main Concept/Introduction",draft:!1,editUrl:"https://github.com/allxon/developer-zone/edit/master/versioned_docs/version-1.1.0/Main Concept/Introduction.md",tags:[],version:"1.1.0",frontMatter:{}},d={},p=[{value:"Secure Data",id:"secure-data",level:2},{value:"Octo JSON RPC API",id:"octo-json-rpc-api",level:2},{value:"<code>v2/notifyPluginUpdate</code>",id:"v2notifypluginupdate",level:3},{value:"<code>v2/notifyPluginCommand</code>",id:"v2notifyplugincommand",level:3},{value:"<code>v2/notifyPluginCommandAck</code>",id:"v2notifyplugincommandack",level:3},{value:"<code>v2/notifyPluginState</code>",id:"v2notifypluginstate",level:3},{value:"<code>v2/notifyPluginEvent</code>",id:"v2notifypluginevent",level:3},{value:"<code>v2/notifyPluginMetric</code>",id:"v2notifypluginmetric",level:3},{value:"<code>v2/notifyPluginAlert</code>",id:"v2notifypluginalert",level:3},{value:"<code>v2/notifyPluginAlarmUpdate</code>",id:"v2notifypluginalarmupdate",level:3},{value:"<code>v2/notifyPluginConfigUpdate</code>",id:"v2notifypluginconfigupdate",level:3},{value:"Typical API Sequence Flow",id:"typical-api-sequence-flow",level:2}],u={toc:p};function c(t){let{components:e,...i}=t;return(0,l.kt)("wrapper",(0,a.Z)({},u,i,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"introduction"},"Introduction"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"allxon_infrasturcture",src:n(2947).Z,width:"853",height:"552"})),(0,l.kt)("p",null,"This picture show the Allxon infrastructure a overview. Each Plugin communicate with Allxon Agent through ",(0,l.kt)("a",{parentName:"p",href:"https://www.jsonrpc.org/specification"},"JSON-RPC")," Websocket, and Allxon Agent like a bridge to bring JSON between Allxon cloud and Plugin."),(0,l.kt)("h2",{id:"secure-data"},"Secure Data"),(0,l.kt)("p",null,"Octo SDK use Plugin Credential help you to verify JSON from Allxon Agent, and help you to sign JSON to Allxon Agent. "),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"security",src:n(8125).Z,width:"602",height:"559"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cpp"},'#include <string>\n#include "json_validator.h"\n\nint main(int argc, char **argv)\n{\n    // notifyPluginUpdate json template\n    std::string json_content = "{\\"jsonrpc\\": \\"2.0\\", \\"method\\": \\"v2/notifyPluginUpdate\\"...}"; \n    std::string PLUGIN_NAME = "my_plugin_name";\n    std::string PLUGIN_APP_GUID = "my_plugin_app_guid";\n    std::string PLUGIN_ACCESS_KEY = "my_plugin_access_key";\n    std::string PLUGIN_VERSION = "my_plugin_version";\n    \n    auto json_validator = JsonValidator(PLUGIN_NAME, PLUGIN_APP_GUID,\n                                        PLUGIN_ACCESS_KEY, PLUGIN_VERSION,\n                                        json_content); \n    \n    std::string other_plugin_api_json_content;\n    if (json_validator.Sign(other_plugin_api_json_content))\n    {\n        // if sign success, you can send it through websocket\n        // e.g. \n        // enpoint.send(other_plugin_api_json_content);\n    }\n\n    if (json_validator.Verify(other_plugin_api_json_content))\n    {\n        // if verify success, means json content is safe, you can read it\n    }\n    return 0;\n}\n')),(0,l.kt)("h2",{id:"octo-json-rpc-api"},"Octo JSON RPC API"),(0,l.kt)("p",null,"Let's briefly introduce every API functionality to power your device on. "),(0,l.kt)("h3",{id:"v2notifypluginupdate"},(0,l.kt)("inlineCode",{parentName:"h3"},"v2/notifyPluginUpdate")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Direction"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Plugin \u2192 Allxon Agent"),(0,l.kt)("td",{parentName:"tr",align:null},"Plugin initialize every Card on Allxon Portal, must call ",(0,l.kt)("inlineCode",{parentName:"td"},"v2/notifyPluginUpdate")," API after the WebSocket connection is established.")))),(0,l.kt)("h3",{id:"v2notifyplugincommand"},(0,l.kt)("inlineCode",{parentName:"h3"},"v2/notifyPluginCommand")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Direction"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Allxon Agent \u2192 Plugin"),(0,l.kt)("td",{parentName:"tr",align:null},"Plugin will be notified once user trigger Command Card on Allxon Portal.")))),(0,l.kt)("h3",{id:"v2notifyplugincommandack"},(0,l.kt)("inlineCode",{parentName:"h3"},"v2/notifyPluginCommandAck")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Direction"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Plugin \u2192 Allxon Agent"),(0,l.kt)("td",{parentName:"tr",align:null},"After receive ",(0,l.kt)("inlineCode",{parentName:"td"},"v2/notifyPluginCommand"),", Plugin acknowledge the Command back to Allxon portal.")))),(0,l.kt)("h3",{id:"v2notifypluginstate"},(0,l.kt)("inlineCode",{parentName:"h3"},"v2/notifyPluginState")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Direction"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Plugin \u2192 Allxon Agent"),(0,l.kt)("td",{parentName:"tr",align:null},"Plugin updates data to the Allxon Portal State Card. Tyically is designed for realtime data and repesent current device states information, these data won't be reserve on Allxon Portal, only keeps latest data. Ex: network condition, power status..")))),(0,l.kt)("h3",{id:"v2notifypluginevent"},(0,l.kt)("inlineCode",{parentName:"h3"},"v2/notifyPluginEvent")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Direction"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Plugin \u2192 Allxon Agent"),(0,l.kt)("td",{parentName:"tr",align:null},"Plugin updates data to the Allxon Portal Event Card. Tyically is designed for non realtime data and repesent device events information, would be reserve on Allxon Portal. Ex: IO trigger event, user login event..")))),(0,l.kt)("h3",{id:"v2notifypluginmetric"},(0,l.kt)("inlineCode",{parentName:"h3"},"v2/notifyPluginMetric")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Direction"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Plugin \u2192 Allxon Agent"),(0,l.kt)("td",{parentName:"tr",align:null},"Plugin updates data to the Allxon Portal Metric Card. Tyically is designed for non realtime data and prefered repesent to chart style, would be reserve on Allxon Portal. Ex: device temperature..")))),(0,l.kt)("h3",{id:"v2notifypluginalert"},(0,l.kt)("inlineCode",{parentName:"h3"},"v2/notifyPluginAlert")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Direction"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Plugin \u2192 Allxon Agent"),(0,l.kt)("td",{parentName:"tr",align:null},"Plugin trigger Alert to the Allxon Portal. Typically is designed for emergency data ,Allxon Portal will notify user through email, webhook... depend on your setting on Allxon Portal.")))),(0,l.kt)("h3",{id:"v2notifypluginalarmupdate"},(0,l.kt)("inlineCode",{parentName:"h3"},"v2/notifyPluginAlarmUpdate")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Direction"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Allxon Agent \u2192 Plugin"),(0,l.kt)("td",{parentName:"tr",align:null},"Plugin will be notified once the Plugin is online if there are alert settings on Allxon Portal. When you setup your alert setting on Allxon Portal, Plugin will get ",(0,l.kt)("inlineCode",{parentName:"td"},"v2/notifyPluginAlarmUpdate")," to synchronize alert related setting.")))),(0,l.kt)("h3",{id:"v2notifypluginconfigupdate"},(0,l.kt)("inlineCode",{parentName:"h3"},"v2/notifyPluginConfigUpdate")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Direction"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Allxon Agent \u2192 Plugin"),(0,l.kt)("td",{parentName:"tr",align:null},"Plugin will be notified once the Plugin is online if there are config settings on Allxon Portal. Typically is designed for configuring your device from Allxon Portal.")))),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"For more details ",(0,l.kt)("a",{parentName:"p",href:"https://wayneliu0512.github.io/octo-developer-zone_docusaurus/API%20Reference"},"API documentation"))),(0,l.kt)("h2",{id:"typical-api-sequence-flow"},"Typical API Sequence Flow"),(0,l.kt)("p",null,"The image below shows what typical API sequence flow. "),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Connect to Allxon Agent by Websocket."),(0,l.kt)("li",{parentName:"ol"},"Send ",(0,l.kt)("inlineCode",{parentName:"li"},"v2/notifyPluginUpdate")," to initialize Allxon Portal Cards."),(0,l.kt)("li",{parentName:"ol"},"You probably will get ",(0,l.kt)("inlineCode",{parentName:"li"},"v2/notifyPluginAlarmUpdate")," if you've Alert setting on Allxon Portal."),(0,l.kt)("li",{parentName:"ol"},"Just like previous step, You probably will get ",(0,l.kt)("inlineCode",{parentName:"li"},"v2/notifyPluginConfigUpdate")," if you've Config setting on Allxon Portal.")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"sequence-diagram",src:n(2178).Z,width:"449",height:"305"})))}c.isMDXComponent=!0},8125:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/Security.drawio-70123cf2e48a67349d5f06c78cf5889b.svg"},2178:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/sequence-diagram-ecdbcb33b3075547e38922e43c6fb79b.png"},2947:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/allxon_infrastructure-52cd7a7c5bb1efbff1a37ee64d4e685c.svg"}}]);